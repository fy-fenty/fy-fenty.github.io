{"version":3,"sources":["assets/images/arti.jpg","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","components/article/index.js","containers/home/index.js","hooks/useInfiniteScroll.js"],"names":["module","exports","_arrayLikeToArray","arr","len","length","i","arr2","Array","_slicedToArray","isArray","Symbol","iterator","Object","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","value","err","o","minLen","n","prototype","toString","call","slice","constructor","name","from","test","TypeError","Article","props","data","title","author","content","date","className","src","Arti","alt","mapDispatchToProps","fetchArticle","connect","list","article","console","log","useState","loading","setLoading","loadData","useEffect","callback","offset","loaded","setLoaded","onScroll","window","scrollY","innerHeight","document","body","offsetHeight","then","addEventListener","removeEventListener","useInfiniteScroll","Promise","res","rej","setTimeout","map","key","to","pathname","state"],"mappings":"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","file":"static/js/3.03159ba1.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/arti.921c8bee.jpg\";","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(n);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import React from 'react';\r\nimport './Article.scss';\r\nimport Arti from '../../assets/images/arti.jpg';\r\n\r\nexport default function Article(props) {\r\n  const { data } = props;\r\n  const { title, author, content, date } = data;\r\n  return (\r\n    <div className=\"article-item\">\r\n      <div className=\"image-wrap\"><img src={Arti} alt=\"\" /></div>\r\n      <div className=\"content-wrap\">\r\n        <div className=\"content-item title\">{title}</div>\r\n        <div className=\"content-item\">{author} / {date}</div>\r\n        <div className=\"content-item\">{content}</div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { connect } from 'react-redux';\r\nimport { Link } from \"react-router-dom\";\r\nimport Article from '../../components/article';\r\nimport { fetch as fetchArticle } from '../../store/article';\r\nimport { useInfiniteScroll } from '../../hooks';\r\nimport './HomeContainer.scss';\r\n\r\nfunction HomeContainer({ list, fetchArticle }) {\r\n  console.log('rerender home');\r\n  const [loading, setLoading] = useState(false)\r\n  const loadData = () => {\r\n    fetchArticle([{\r\n      title: '标题',\r\n      author: '作者',\r\n      content: '这是简短的文章简介～～',\r\n      date: '2021-12-12',\r\n    },{\r\n      title: '标题',\r\n      author: '作者',\r\n      content: '这是简短的文章简介～～',\r\n      date: '2021-12-12',\r\n    },{\r\n      title: '标题',\r\n      author: '作者',\r\n      content: '这是简短的文章简介～～',\r\n      date: '2021-12-12',\r\n    },{\r\n      title: '标题',\r\n      author: '作者',\r\n      content: '这是简短的文章简介～～',\r\n      date: '2021-12-12',\r\n    },{\r\n      title: '标题',\r\n      author: '作者',\r\n      content: '这是简短的文章简介～～',\r\n      date: '2021-12-12',\r\n    },{\r\n      title: '标题',\r\n      author: '作者',\r\n      content: '这是简短的文章简介～～',\r\n      date: '2021-12-12',\r\n    },{\r\n      title: '标题',\r\n      author: '作者',\r\n      content: '这是简短的文章简介～～',\r\n      date: '2021-12-12',\r\n    }]);\r\n  }\r\n  useEffect(() => {\r\n    if (list.length === 0) {\r\n      loadData();\r\n    }\r\n  })\r\n\r\n  useInfiniteScroll({\r\n    offset: 80,\r\n    callback: () => new Promise((res, rej) => {\r\n      setLoading(true);\r\n      setTimeout(() => {\r\n        loadData();\r\n        setLoading(false);\r\n        res(true);\r\n      }, 3000)\r\n    })\r\n  })\r\n\r\n  return (\r\n    <div className=\"article-list\">\r\n      {list && list.map((article, key) => <Link key={`${article.title}-${key}`} to={{\r\n        pathname: '/article',\r\n        state: article\r\n      }}><Article data={article} /></Link>)}\r\n      {loading && <div className=\"loading\">Loading...</div>}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = ({ article: { list } }) => {\r\n  return { list }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  fetchArticle,\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(HomeContainer);\r\n","import { useEffect, useState } from \"react\";\r\n\r\nexport default function useInfiniteScroll({\r\n  callback,\r\n  offset,\r\n}) {\r\n  const [ loaded, setLoaded ] = useState(false);\r\n  const onScroll = () => {\r\n    if (window.scrollY + window.innerHeight >= document.body.offsetHeight - offset) {\r\n      !loaded && callback().then((loaded) => {\r\n        if (loaded) {\r\n          setLoaded(false);\r\n        }\r\n      });\r\n      setLoaded(true);\r\n    }\r\n  }\r\n  useEffect(() => {\r\n    document.addEventListener('scroll', onScroll);\r\n    return () => {\r\n      document.removeEventListener('scroll', onScroll);\r\n    }\r\n  })\r\n}\r\n"],"sourceRoot":""}